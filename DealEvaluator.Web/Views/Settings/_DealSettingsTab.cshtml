@model DealEvaluator.Application.DTOs.DealSettings.UpdateDealSettingsDto

<form id="settingsForm" method="post" asp-controller="Settings" asp-action="Index">
    @Html.AntiForgeryToken()

    <!-- Selling Costs Section -->
    <div class="row mb-4">
        <div class="col-12">
            <h5 class="text-muted mb-3">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-cash-stack me-2" viewBox="0 0 16 16" style="vertical-align: text-bottom;">
                    <path d="M1 3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1zm7 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4"/>
                    <path d="M0 5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1zm3 0a2 2 0 0 1-2 2v4a2 2 0 0 1 2 2h10a2 2 0 0 1 2-2V7a2 2 0 0 1-2-2z"/>
                </svg>
                Selling Costs
            </h5>
            <p class="text-muted small mb-3">Costs you'll pay when selling the property (percentage of ARV)</p>
        </div>
        <div class="col-md-6 mb-3">
            <label for="SellingAgentCommission" class="form-label">Agent Commission *</label>
            <div class="input-group">
                <input type="number" step="0.1" class="form-control" id="SellingAgentCommission" name="SellingAgentCommission" asp-for="SellingAgentCommission" required>
                <span class="input-group-text" id="commission-percent">%</span>
            </div>
            <div class="form-text">Typical: 6%</div>
            <span asp-validation-for="SellingAgentCommission" class="text-danger"></span>
        </div>
        <div class="col-md-6 mb-3">
            <label for="SellingClosingCosts" class="form-label">Closing Costs *</label>
            <div class="input-group">
                <input type="number" step="0.1" class="form-control" id="SellingClosingCosts" name="SellingClosingCosts" asp-for="SellingClosingCosts" required>
                <span class="input-group-text">%</span>
            </div>
            <div class="form-text">Typical: 2%</div>
            <span asp-validation-for="SellingClosingCosts" class="text-danger"></span>
        </div>
    </div>

    <hr class="my-4">

    <!-- Buying Costs Section -->
    <div class="row mb-4">
        <div class="col-12">
            <h5 class="text-muted mb-3">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-cart-check me-2" viewBox="0 0 16 16" style="vertical-align: text-bottom;">
                    <path d="M11.354 6.354a.5.5 0 0 0-.708-.708L8 8.293 6.854 7.146a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0z"/>
                    <path d="M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1zm3.915 10L3.102 4h10.796l-1.313 7zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0m7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/>
                </svg>
                Buying Costs
            </h5>
            <p class="text-muted small mb-3">Costs you'll pay when purchasing the property (percentage of purchase price)</p>
        </div>
        <div class="col-md-12 mb-3">
            <label for="BuyingClosingCosts" class="form-label">Closing Costs *</label>
            <div class="input-group">
                <input type="number" step="0.1" class="form-control" id="BuyingClosingCosts" name="BuyingClosingCosts" asp-for="BuyingClosingCosts" required>
                <span class="input-group-text">%</span>
            </div>
            <div class="form-text">Typical: 2% - includes inspections, appraisals, loan fees</div>
            <span asp-validation-for="BuyingClosingCosts" class="text-danger"></span>
        </div>
    </div>

    <hr class="my-4">

    <!-- Holding Costs Section -->
    <div class="row mb-4">
        <div class="col-12">
            <h5 class="text-muted mb-3">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-calendar-range me-2" viewBox="0 0 16 16" style="vertical-align: text-bottom;">
                    <path d="M9 7a1 1 0 0 1 1-1h5v2h-5a1 1 0 0 1-1-1M1 9h4a1 1 0 0 1 1 1v5H1zm8 0h5a1 1 0 0 1 1 1v5H9zm-8 7V9h5v7zm7 0V9h6v7z"/>
                    <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5M1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4z"/>
                </svg>
                Holding Costs
            </h5>
            <p class="text-muted small mb-3">Monthly expenses while you own the property during rehab</p>
        </div>
        <div class="col-md-6 mb-3">
            <label for="AnnualPropertyTaxRate" class="form-label">Property Tax Rate (Annual) *</label>
            <div class="input-group">
                <input type="number" step="0.1" class="form-control" id="AnnualPropertyTaxRate" name="AnnualPropertyTaxRate" asp-for="AnnualPropertyTaxRate" required>
                <span class="input-group-text">%</span>
            </div>
            <div class="form-text">Typical: 1.2% annually</div>
            <span asp-validation-for="AnnualPropertyTaxRate" class="text-danger"></span>
        </div>
        <div class="col-md-6 mb-3">
            <label for="DefaultHoldingMonths" class="form-label">Holding Period *</label>
            <div class="input-group">
                <input type="number" class="form-control" id="DefaultHoldingMonths" name="DefaultHoldingMonths" asp-for="DefaultHoldingMonths" min="1" max="48" required>
                <span class="input-group-text">months</span>
            </div>
            <div class="form-text">Average rehab timeline (typically 3-6 months)</div>
            <span asp-validation-for="DefaultHoldingMonths" class="text-danger"></span>
        </div>
        <div class="col-md-6 mb-3">
            <label for="MonthlyInsurance" class="form-label">Monthly Insurance *</label>
            <div class="input-group">
                <span class="input-group-text">$</span>
                <input type="number" class="form-control" id="MonthlyInsurance" name="MonthlyInsurance" asp-for="MonthlyInsurance" required>
            </div>
            <div class="form-text">Typical: $100-200/month</div>
            <span asp-validation-for="MonthlyInsurance" class="text-danger"></span>
        </div>
        <div class="col-md-6 mb-3">
            <label for="MonthlyUtilities" class="form-label">Monthly Utilities *</label>
            <div class="input-group">
                <span class="input-group-text">$</span>
                <input type="number" class="form-control" id="MonthlyUtilities" name="MonthlyUtilities" asp-for="MonthlyUtilities" required>
            </div>
            <div class="form-text">Water, electric, gas during rehab</div>
            <span asp-validation-for="MonthlyUtilities" class="text-danger"></span>
        </div>
    </div>

    <hr class="my-4">

    <!-- Profit & Risk Section -->
    <div class="row mb-4">
        <div class="col-12">
            <h5 class="text-muted mb-3">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-graph-up-arrow me-2" viewBox="0 0 16 16" style="vertical-align: text-bottom;">
                    <path fill-rule="evenodd" d="M0 0h1v15h15v1H0zm10 3.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V4.9l-3.613 4.417a.5.5 0 0 1-.74.037L7.06 6.767l-3.656 5.027a.5.5 0 0 1-.808-.588l4-5.5a.5.5 0 0 1 .758-.06l2.609 2.61L13.445 4H10.5a.5.5 0 0 1-.5-.5"/>
                </svg>
                Profit Target & Risk
            </h5>
            <p class="text-muted small mb-3">Define your desired profit and risk buffer</p>
        </div>
        <div class="col-md-6 mb-3">
            <label for="ProfitTargetType" class="form-label">Profit Target Type *</label>
            <select class="form-select" id="ProfitTargetType" name="ProfitTargetType" asp-for="ProfitTargetType" required>
                <option value="0">Percentage of ARV</option>
                <option value="1">Fixed Dollar Amount</option>
            </select>
            <span asp-validation-for="ProfitTargetType" class="text-danger"></span>
        </div>
        <div class="col-md-6 mb-3">
            <label for="ProfitTargetValue" class="form-label">Profit Target Value *</label>
            <div class="input-group">
                <input type="number" class="form-control" id="ProfitTargetValue" name="ProfitTargetValue" asp-for="ProfitTargetValue" required>
                <span class="input-group-text" id="profit-unit">%</span>
            </div>
            <div class="form-text" id="profit-help">E.g., 15 for 15% of ARV or 40000 for $40,000</div>
            <span asp-validation-for="ProfitTargetValue" class="text-danger"></span>
        </div>
        <div class="col-md-12 mb-3">
            <label for="ContingencyPercentage" class="form-label">Contingency Buffer *</label>
            <div class="input-group">
                <input type="number" class="form-control" id="ContingencyPercentage" name="ContingencyPercentage" asp-for="ContingencyPercentage" required>
                <span class="input-group-text">%</span>
            </div>
            <div class="form-text">Safety buffer added to rehab costs (typical: 10%)</div>
            <span asp-validation-for="ContingencyPercentage" class="text-danger"></span>
        </div>
    </div>

    <!-- Submit Buttons -->
    <div class="row mt-4">
        <div class="col-md-6 mb-2">
            <button type="submit" formaction="@Url.Action("ResetToDefaults", "Settings")" formmethod="post" class="btn btn-outline-warning btn-lg w-100" onclick="return confirm('Are you sure you want to reset all settings to defaults?');">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-arrow-counterclockwise me-2" viewBox="0 0 16 16" style="vertical-align: text-bottom;">
                    <path fill-rule="evenodd" d="M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2z"/>
                    <path d="M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466"/>
                </svg>
                Reset to Defaults
            </button>
        </div>
        <div class="col-md-6 mb-2">
            <button type="submit" class="btn btn-primary btn-lg w-100">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-check-circle me-2" viewBox="0 0 16 16" style="vertical-align: text-bottom;">
                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
                    <path d="m10.97 4.97-.02.022-3.473 4.425-2.093-2.094a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05"/>
                </svg>
                Save Settings
            </button>
        </div>
    </div>
</form>